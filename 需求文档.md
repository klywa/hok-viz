---
tags:
  - 方案计划
  - 工作/指挥官
---
我需要你实现一个将王者荣耀对局的文本描述转换为高清png的工具，并支持批量转换模式和web模式两种使用模式。

## 核心功能
将王者荣耀对局的文本描述转换为高清png的工具

对局描述信息如下：
```
[整体情况]
当前时间：2025年11月18日 20:01:27，星期二。游戏阶段：13分4秒，比赛中后期
现在是晚上。
这是一段发生在队友之间的语音聊天。玩家使用的角色是廉颇（上路），翻江小青龙使用的角色是诸葛亮（打野），那鹧鸪怎么说使用的角色是金蝉（中路），一条小巷使用的角色是墨子（辅助），五里雾中使用的角色是鲁班七号（下路）。

[地图信息]
王者荣耀地图范围为120*120，我方水晶位于(-48.0, -48.0)，敌方水晶位于(47.9, 48.2)。我方防御塔坐标为：蓝方上路一塔(-52.4, 28.7)、蓝方上路二塔(-53.2, -7.0)、蓝方上路高地塔(-52.5, -32.8)、蓝方中路一塔(-12.3, -12.5)、蓝方中路二塔(-27.8, -27.1)、蓝方中路高地塔(-37.4, -37.5)、蓝方下路一塔(27.9, -51.7)、蓝方下路二塔(-7.6, -52.5)、蓝方下路高地塔(-32.0, -52.3)。敌方防御塔坐标为：红方上路一塔(-28.0, 52.5)、红方上路二塔(7.2, 52.4)、红方上路高地塔(33.0, 53.2)、红方中路一塔(12.0, 12.5)、红方中路二塔(27.3, 27.6)、红方中路高地塔(38.0, 38.1)、红方下路一塔(53.1, -27.1)、红方下路二塔(52.5, 7.1)、红方下路高地塔(53.4, 32.5)。

[总体态势]
我方人头数：23，敌方人头数：15。
我方总经济：40401，敌方总经济：36938。
当前对局时间：13:04。

[玩家情况]
<我方-玩家-廉颇>是我方上路，14级，没有大招，血量值中等（26%），蓝量100%，有暴君buff。<我方-玩家-廉颇>在敌方上路二塔附近，坐标（14.7，50.0），附近的我方英雄有：我方-诸葛亮、我方-金蝉、我方-墨子；附近的敌方英雄有：敌方-铠；附近没有我方兵线，附近没有敌方兵线。<我方-玩家-廉颇>战绩超神（击杀：3，助攻：5，死亡：2），当前经济：9291，已出装备：红莲斗篷、霸者重装、不祥征兆、抵抗之靴、荆棘护手、力量腰带，剩余金币481。

[我方英雄状态]
<我方-翻江小青龙-诸葛亮>是我方打野，14级，没有大招，已阵亡。<我方-翻江小青龙-诸葛亮>已被击杀，还有39秒复活。<我方-翻江小青龙-诸葛亮>战绩一般（击杀：5，助攻：2，死亡：5），当前经济：8544，已出装备：符文大剑、秘法之靴、噬神之书、博学者之怒、云灵木、咒术典籍，剩余金币429。
<我方-那鹧鸪怎么说-金蝉>是我方中路，12级，没有大招，血量值中等（52%），蓝量49%，有暴君buff。<我方-那鹧鸪怎么说-金蝉>在敌方上路高地塔附近，坐标（19.2，47.0），附近的我方英雄有：我方-诸葛亮、我方-廉颇、我方-墨子；附近的敌方英雄有：敌方-铠；附近没有我方兵线，附近没有敌方兵线。<我方-那鹧鸪怎么说-金蝉>战绩超神（击杀：0，助攻：5，死亡：1），当前经济：6989，已出装备：疾步之靴、梦魇之牙、日暮之流、博学者之怒，剩余金币69。
<我方-一条小巷-墨子>是我方辅助，12级，没有大招，血量低（9%），蓝量62%，有暴君buff。<我方-一条小巷-墨子>在敌方上路高地塔附近，坐标（19.2，45.9），附近的我方英雄有：我方-诸葛亮、我方-廉颇、我方-金蝉；附近的敌方英雄有：敌方-铠；附近没有我方兵线，附近没有敌方兵线。<我方-一条小巷-墨子>战绩超神（击杀：6，助攻：10，死亡：3），当前经济：7140，已出装备：极影·救赎、抵抗之靴、旭日初光、不祥征兆，剩余金币300。
<我方-五里雾中-鲁班七号>是我方下路，13级，没有大招，血量值中等（55%），蓝量24%，有暴君buff。<我方-五里雾中-鲁班七号>在敌方中路高地塔附近，坐标（26.0，36.1），附近没有我方英雄；附近的敌方英雄有：敌方-王昭君、敌方-蔡文姬；附近有我方兵线，附近没有敌方兵线。<我方-五里雾中-鲁班七号>战绩超神（击杀：9，助攻：7，死亡：4），当前经济：8437，已出装备：抵抗之靴、影刃、无尽战刃、制裁之刃、日冕、铁剑，剩余金币472。

[视野可见的敌方英雄]
<敌方-倾雨-铠>是敌方打野，14级，没有大招，血量低（17%），蓝量80%。<敌方-倾雨-铠>在敌方上路高地塔附近，坐标（23.2，52.4），附近的我方英雄有：我方-廉颇、我方-金蝉、我方-墨子；附近没有敌方英雄；附近没有我方兵线，附近没有敌方兵线。<敌方-倾雨-铠>战绩不错（击杀：8，助攻：1，死亡：3），当前经济：8365，已出装备：追击刀锋、抵抗之靴、暗影战斧、宗师之力、无尽战刃、铁剑。
<敌方-狗子-王昭君>是敌方中路，12级，没有大招，血量值中等（58%），蓝量85%。<敌方-狗子-王昭君>在敌方中路高地塔附近，坐标（35.0，40.4），附近的我方英雄有：我方-鲁班七号；附近没有敌方英雄；附近没有我方兵线，附近没有敌方兵线。<敌方-狗子-王昭君>战绩不错（击杀：2，助攻：5，死亡：3），当前经济：7582，已出装备：秘法之靴、回响之杖、凝冰之息、博学者之怒、咒术典籍。
<敌方-我丢盔弃甲-蔡文姬>是敌方辅助，12级，没有大招，已阵亡。<敌方-我丢盔弃甲-蔡文姬>已被击杀，还有32秒复活。<敌方-我丢盔弃甲-蔡文姬>战绩一般（击杀：1，助攻：7，死亡：5），当前经济：6665，已出装备：极影·救赎、秘法之靴、博学者之怒、圣者法典、急速铠甲。
<敌方-泥石流怪兽-后羿>是敌方下路，12级，没有大招，已阵亡。<敌方-泥石流怪兽-后羿>已被击杀，还有31秒复活。<敌方-泥石流怪兽-后羿>战绩很差（击杀：3，助攻：3，死亡：7），当前经济：7173，已出装备：急速战靴、影刃、无尽战刃、速击之枪、血魂刃、匕首。

[视野不可见的敌方英雄]
<敌方-毛绒棉花球-白起>是敌方上路，12级，视野不可见。<敌方-毛绒棉花球-白起>战绩很差（击杀：1，助攻：0，死亡：5），当前经济：7153，已出装备：疾步之靴、红莲斗篷、暴烈之甲、永夜守护、红玛瑙。

[阵亡英雄]
我方阵亡英雄：诸葛亮。
敌方阵亡英雄：白起、蔡文姬、后羿。

[防御塔与兵线状态]
上路：我方上路防御塔被推到上路一塔，坐标（-51.80，21.20），剩余血量31%，没有被攻击。暂无威胁兵线。；敌方上路防御塔被推到上路高地塔，坐标（27.60，49.90），剩余血量100%，没有被攻击。最近的威胁兵线为普通小兵，在我方上路一塔附近，坐标（-47.80，28.00），距离78.50，数量3，血量100%。
中路：我方中路防御塔被推到中路高地塔，坐标（-34.60，-34.60），剩余血量89%，没有被攻击。暂无威胁兵线。；敌方中路防御塔被推到中路高地塔，坐标（34.60，34.60），剩余血量100%，正在被攻击。最近的威胁兵线为炮车，在敌方中路高地塔附近，坐标（30.80，28.60），距离7.00，数量1，血量19%。
下路：我方下路防御塔被推到下路二塔，坐标（-2.80，-49.80），剩余血量77%，没有被攻击。最近的威胁兵线为主宰先锋，在我方下路一塔附近，坐标（19.20，-47.50），距离22.10，数量1，血量39%。；敌方下路防御塔被推到下路二塔，坐标（51.10，7.10），剩余血量86%，没有被攻击。最近的威胁兵线为普通小兵，在我方下路一塔附近，坐标（12.60，-47.70），距离67.00，数量2，血量100%。

[野怪状态]
核心中立野怪：主宰：不存在，104秒后刷新；暴君：不存在，148秒后刷新；风暴龙王：不存在，412秒后刷新
存活可见野怪：
未知情况野怪：我方蓝buff；我方红buff；敌方蓝buff；敌方红buff
```

图片需要包含以下要素：
- 核心区域：在一张王者荣耀地图上，标注出以下内容：
	- 英雄：图标为英雄头像，上方有血量、蓝量条，以及使用他的玩家名。玩家使用绿色边框，我方队友使用蓝色边框，敌方使用红色边框。
	- 防御塔：所有防御塔的位置，血量条。已经被攻破的防御塔不用显示。
	- 兵线：所有兵线的位置，血量条。兵线用简约的小圆点展示即可。只需要显示离对方防御塔最近的兵线。
	- 红蓝buff、暴君、主宰、风暴龙王：仅展示明确存在的。
- 上方关键信息区域：显示比赛时间、双方人头数、防御塔保护机制是否生效
- 左右侧英雄信息区域：左侧显示我方、右侧显示敌方每个英雄（英雄纵向排列）的如下信息
	- 英雄头像、使用者、血量、蓝量、大招是否就绪（用一个图标展示）、是否有红蓝buff和暴君buff（用图标展示）、当前关键装备（配合图标）、剩余金币。
	- 如果核心区域的英雄图标和其他英雄图标重叠，则该英雄头像有一条虚线（尽可能不遮挡核心区域内容）连接至核心区域的英雄位置，以方便在英雄重叠时快速定位每个英雄在哪里。玩家使用绿色虚线，我方队友使用蓝色，敌方使用红色。
- 下方野怪信息区域：
	- 展示双方红蓝buff、暴君、主宰、风暴龙王的状态（包括是否存在，是否可见，当前血量）。
	- 如果对应野怪可见，并且在核心区域的图标与其他英雄图标重叠，则增加一条灰色虚线连接到对应buff所在位置。
	- 根据我方蓝buff、我方红buff、主宰、风暴龙王、暴君、敌方红buff、敌方蓝buff的顺序组织信息


## 使用方式1：批量格式
- 输入为jsonl格式的<id-对局信息>对，以及输出图片的位置。将每条信息转换为用id命名的高清png图片。
- 命令行工具：`python src/batch.py --input data/sample.jsonl --output output_results`

## 使用方式2：
- 核心区域：图片展示区，支持图片生成后自动显示。
- 操作区域：
    - 提供UI界面，主要内容为上传对局信息（支持 .jsonl/.txt 文件上传或直接粘贴文本）。
    - **画质设置**：支持标准(1080p)、高清(4K)、超清(6K)三种模式。
    - **操作按钮**：生成图片、清空内容。
    - **结果处理**：生成后提供“保存高清PNG”下载按钮，以及“复制到剪贴板”按钮。
    - 文本窗口：展示上传的内容或手动输入的内容。


## 其他要求
- 所有英雄、野怪、技能、装备需要有对应的图标或头像。会自动下载好这些图像并保存在合适的位置（`src/assets_manager.py`）。
- 正确显示中文。
- 编写完善的使用说明
- 图片信息准确，构图清晰，画风简约、高级
- web模式界面尽可能简约、高级。
